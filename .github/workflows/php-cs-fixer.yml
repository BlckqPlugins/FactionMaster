name: Check & fix styling

on: 
  push:
  pull_request:

jobs:
    php-cs-fixer:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v2
              with:
                  ref: ${{ github.head_ref }}

            - name: Run PHP CS Fixer
              uses: docker://oskarstark/php-cs-fixer-ga
              with:
                  args: --config=config.php_cs --allow-risky=yes
                  
            - name: Create Pull Request
              uses: peter-evans/create-pull-request@v3
              with:
                token: ${{ secrets.GITHUB_TOKEN }}
                commit-message: Fix styling
                title: '[PHP CS fixer] Fix styling'
                body: >
                  This PR is auto-generated to commit styling fix.
                labels: Styling
                branch: styling-fix
                reviewers: ShockedPlot7560